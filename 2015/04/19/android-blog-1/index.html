<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Android应用开发一 | Jackie&#39;s Blog</title>
  <meta name="author" content="Jackie wu">
  
  <meta name="description" content="学习Android已经有一段时间了，可是一直没有动手开发实际的应用，今天就简单的实践下使用android来抓取自己的博客在手机上查看。
知识准备
使用Jsoup抓取网页 Jsoup是一个很好用的java的库可以使用jsoup来抓取网页进行解析，jsoup提供了类似于jquery的元素查找的方法可以很">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Android应用开发一"/>
  <meta property="og:site_name" content="Jackie&#39;s Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Jackie&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Jackie&#39;s Blog</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-04-19T06:35:46.000Z"><a href="/2015/04/19/android-blog-1/">2015-04-19</a></time>
      
      
  
    <h1 class="title">Android应用开发一</h1>
  

    </header>
    <div class="entry">
      
        <p>   学习Android已经有一段时间了，可是一直没有动手开发实际的应用，今天就简单的实践下使用android来抓取自己的博客在手机上查看。</p>
<h3 id="知识准备">知识准备</h3><ol>
<li>使用Jsoup抓取网页<br> Jsoup是一个很好用的java的库可以使用jsoup来抓取网页进行解析，jsoup提供了类似于jquery的元素查找的方法可以很方便解析HTML元素或者内容。详情请参考<a href="http://jsoup.org/" target="_blank" rel="external">jsoup</a>中内容进行参考。简单示例:</li>
</ol>
<pre><code>String blog_url = <span class="string">"http://blog.csdn.net/wujindou"</span>;
Document doc = Jsoup.connect(blog_url).
userAgent(<span class="string">"Mozilla"</span>).followRedirects(<span class="constant">true</span>).<span class="keyword">timeout</span>(<span class="number">10000</span>).<span class="keyword">get</span>();
Elements news = doc.select(<span class="string">"#article_list span.link_title a"</span>);
<span class="keyword">for</span>(Element link: news){
    String href = link.attr(<span class="string">"href"</span>);
    String <span class="property">id</span> = href.substring(href.<span class="property">length</span>()-<span class="number">8</span>,href.<span class="property">length</span>());
    System.out.println(<span class="property">id</span>);
    System.out.println(link.<span class="type">text</span>());
}
</code></pre><ol>
<li>编写自定义Adapter<br>使用ListView显示列表最简单的方法就是：定义item布局文件,然后使用Map建立组件之间的对应关系<br>比如:</li>
</ol>
<ul>
<li>定义各个item的布局文件data_list.xml<br><img src="/images/android/android_blog_1.png" alt="Alt text"></li>
<li>定义全局的布局文件main.xml<br><img src="/images/android/android_blog_2.jpg" alt="Alt text"></li>
<li>使用<br><img src="/images/android/android_blog_3.png" alt="Alt text"><br>这样写虽然可以但是结构不清晰而且如果数据的内容过多也不方便进行扩展了，所以考虑使用自定的Adapter来封装原始的SimpleAdapter类方便程序的扩展和实现。</li>
<li>首先编写Item类： </li>
</ul>
<pre><code><span class="keyword">public</span> <span class="keyword">class</span> Item {
    <span class="keyword">private</span> <span class="built_in">String</span> id;
    <span class="keyword">private</span> <span class="built_in">String</span> title;
    <span class="keyword">public</span> Item(<span class="built_in">String</span> id,<span class="built_in">String</span> title){
        <span class="keyword">this</span>.id = id ;
        <span class="keyword">this</span>.title = title;
    }
    <span class="keyword">public</span> <span class="built_in">String</span> getId() {
        <span class="keyword">return</span> id;
    }
    <span class="keyword">public</span> <span class="built_in">void</span> setId(<span class="built_in">String</span> id) {
        <span class="keyword">this</span>.id = id;
    }
    <span class="keyword">public</span> <span class="built_in">String</span> getTitle() {
        <span class="keyword">return</span> title;
    }
    <span class="keyword">public</span> <span class="built_in">void</span> setTitle(<span class="built_in">String</span> title) {
        <span class="keyword">this</span>.title = title;
    }
</code></pre><p>}</p>
<ul>
<li>自定义Adapter</li>
</ul>
<pre><code><span class="keyword">package</span> com.example.blogapp;
<span class="keyword">import</span> java.util.List;
<span class="keyword">import</span> android.content.Context;
<span class="keyword">import</span> android.view.LayoutInflater;
<span class="keyword">import</span> android.view.View;
<span class="keyword">import</span> android.view.ViewGroup;
<span class="keyword">import</span> android.widget.BaseAdapter;
<span class="keyword">import</span> android.widget.TextView;
<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySimpleAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span></span>{
<span class="keyword">private</span> Context context;
<span class="comment">// 父列表视图容器</span>
<span class="keyword">private</span> LayoutInflater listContainer;
<span class="comment">// 新闻数据集合</span>
<span class="keyword">private</span> List&lt;Item&gt; newsDataList;
<span class="comment">// 列表项布局</span>
<span class="keyword">private</span> <span class="keyword">int</span> itemViewResource;
<span class="comment">// 列表项组件集合(title、author、count、date、flag)</span>
<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ListItemView</span> </span>{ 
    <span class="keyword">public</span> TextView title;
    <span class="keyword">public</span> TextView id;
}

<span class="javadoc">/**
 * 根据父列表构造列表项适配器，加载列表项界面、读取并设置列表项数据
 *<span class="javadoctag"> @param</span> context 父列表
 *<span class="javadoctag"> @param</span> newsDataList 列表项数据
 *<span class="javadoctag"> @param</span> itemViewResource 列表项界面布局
 */</span>
<span class="function"><span class="keyword">public</span> <span class="title">MySimpleAdapter</span><span class="params">(Context context, List&lt;Item&gt; newsDataList, <span class="keyword">int</span> itemViewResource)</span> </span>{
    <span class="keyword">this</span>.context = context;
    <span class="keyword">this</span>.listContainer = LayoutInflater.from(context);
    <span class="keyword">this</span>.itemViewResource = itemViewResource;
    <span class="keyword">this</span>.newsDataList = newsDataList;
}

<span class="javadoc">/**
 * 根据数据条目返回列表项数目
 */</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>{
    <span class="keyword">return</span> newsDataList.size();
}

<span class="function"><span class="keyword">public</span> Object <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> arg0)</span> </span>{
    <span class="keyword">return</span> <span class="keyword">null</span>;
}

<span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> arg0)</span> </span>{
    <span class="keyword">return</span> <span class="number">0</span>;
}

<span class="javadoc">/**
 * 根据位置和相关设定返回列表项
 *<span class="javadoctag"> @param</span> position 列表项起始位置
 *<span class="javadoctag"> @param</span> convertView 返回的每一个列表项
 *<span class="javadoctag"> @param</span> parent 列表项父容器
 */</span>

<span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>{

    <span class="comment">// 创建自定义列表项组件</span>
    ListItemView listItemView = <span class="keyword">null</span>;

    <span class="keyword">if</span> (convertView == <span class="keyword">null</span>) {

        <span class="comment">// 获取列表项布局（this.itemViewResource--）</span>
        convertView = listContainer.inflate(<span class="keyword">this</span>.itemViewResource, <span class="keyword">null</span>);
        <span class="comment">//初始化列表项各组件(title、author、count、date、flag)</span>
        listItemView = <span class="keyword">new</span> ListItemView();
        listItemView.title = (TextView) convertView
                .findViewById(R.id<span class="number">._</span>title);
        listItemView.id = (TextView) convertView
                .findViewById(R.id<span class="number">._</span>id);
        convertView.setTag(listItemView);

    } <span class="keyword">else</span> {
        listItemView = (ListItemView) convertView.getTag();
    }

    <span class="comment">//依次读取列表项数据中的第position项数据赋于news对象</span>
    Item news = newsDataList.get(position);
    listItemView.title.setText(news.getTitle());
    listItemView.id.setText(news.getId());
    <span class="keyword">return</span> convertView;
}
</code></pre><p>}</p>
<ul>
<li>data_list.xml</li>
</ul>
<pre><code>&lt;?xml <span class="variable">version=</span><span class="string">"1.0"</span> <span class="variable">encoding=</span><span class="string">"utf-8"</span>?&gt;
    &lt;TableLayout
        xmlns:<span class="variable">android=</span><span class="string">"http://schemas.android.com/apk/res/android"</span>
        android:<span class="variable">layout_width=</span><span class="string">"fill_parent"</span>
        android:<span class="variable">layout_height=</span><span class="string">"wrap_content"</span>&gt;
    &lt;TableRow&gt;
        &lt;TextView
            android:<span class="variable">id=</span><span class="string">"@+id/_id"</span>
            android:<span class="variable">textSize=</span><span class="string">"12px"</span>    
            android:<span class="variable">gravity=</span><span class="string">"center_vertical"</span>
            android:<span class="variable">layout_height=</span><span class="string">"wrap_content"</span>
            android:<span class="variable">layout_width=</span><span class="string">"wrap_content"</span>/&gt;
        &lt;TextView
            android:<span class="variable">id=</span><span class="string">"@+id/_title"</span>
            android:<span class="variable">textSize=</span><span class="string">"12px"</span>
            android:<span class="variable">gravity=</span><span class="string">"center_vertical"</span>
            android:<span class="variable">layout_height=</span><span class="string">"wrap_content"</span>
            android:<span class="variable">layout_width=</span><span class="string">"wrap_content"</span>/&gt;
    &lt;/TableRow&gt;
&lt;/TableLayout&gt;
</code></pre><ul>
<li>main.xml文件</li>
</ul>
<pre><code>&lt;LinearLayout xmlns:<span class="variable">android=</span><span class="string">"http://schemas.android.com/apk/res/android"</span>  
    xmlns:<span class="variable">tools=</span><span class="string">"http://schemas.android.com/tools"</span>
    android:<span class="variable">orientation=</span><span class="string">"vertical"</span>
    android:<span class="variable">layout_width=</span><span class="string">"fill_parent"</span>  
    android:<span class="variable">layout_height=</span><span class="string">"fill_parent"</span>  
    tools:<span class="variable">context=</span><span class="string">".MainActivity"</span> &gt;  
    &lt;TextView 
        android:<span class="variable">layout_width=</span><span class="string">"fill_parent"</span>
        android:<span class="variable">layout_height=</span><span class="string">"wrap_content"</span>
        android:<span class="variable">text=</span><span class="string">"@string/head"</span>
        /&gt;
    &lt;ListView  
        android:<span class="variable">id=</span><span class="string">"@+id/listview"</span>  
        android:<span class="variable">layout_width=</span><span class="string">"match_parent"</span>  
        android:<span class="variable">layout_height=</span><span class="string">"match_parent"</span> &gt;  
    &lt;/ListView&gt;  
&lt;/LinearLayout&gt;  
</code></pre><ul>
<li>使用MainActivity</li>
</ul>
<pre><code><span class="keyword">package</span> com.example.blogapp;

<span class="keyword">import</span> java.util.ArrayList;

<span class="keyword">import</span> java.util.List;

<span class="keyword">import</span> android.app.Activity;
<span class="keyword">import</span> android.os.Bundle;
<span class="keyword">import</span> android.view.Menu;
<span class="keyword">import</span> android.widget.ArrayAdapter;
<span class="keyword">import</span> android.widget.ListView;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>{

    <span class="keyword">private</span> Item item ;
    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Item&gt; newsDataList = <span class="keyword">new</span> ArrayList&lt;Item&gt;();
    <span class="keyword">private</span> ListView listView ;
    <span class="keyword">private</span> MySimpleAdapter myadapter ;
    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{
        <span class="keyword">super</span>.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        <span class="keyword">this</span>.initNewsData();
        myadapter = <span class="keyword">new</span> MySimpleAdapter(MainActivity.<span class="keyword">this</span>, newsDataList,R.layout.data_list);  
      <span class="comment">//  listView.setAdapter(adapter);  </span>
        listView =(ListView) findViewById(R.id.listview);
        listView.setAdapter(myadapter);

    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> </span>{
        <span class="comment">// Inflate the menu; this adds items to the action bar if it is present.</span>
        getMenuInflater().inflate(R.menu.main, menu);
        <span class="keyword">return</span> <span class="keyword">true</span>;
    }
    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initNewsData</span><span class="params">()</span> </span>{
        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">20</span>; i++) {
            item = <span class="keyword">new</span> Item(<span class="string">"ID:"</span>+i,<span class="string">"标题"</span>+ i);
            newsDataList.add(item);
        }
    }

}
</code></pre><p>效果：</p>
<p><img src="/images/android/android_blog_result.png" alt="Alt text"></p>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/Android开发/">Android开发</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://yoursite.com/2015/04/19/android-blog-1/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/Android开发/">Android开发</a><small>4</small></li>
  
    <li><a href="/tags/Python/">Python</a><small>1</small></li>
  
    <li><a href="/tags/c-学习/">c++学习</a><small>2</small></li>
  
    <li><a href="/tags/git使用/">git使用</a><small>1</small></li>
  
    <li><a href="/tags/js学习笔记/">js学习笔记</a><small>1</small></li>
  
    <li><a href="/tags/php/">php</a><small>2</small></li>
  
    <li><a href="/tags/storm/">storm</a><small>1</small></li>
  
    <li><a href="/tags/大数据/">大数据</a><small>12</small></li>
  
    <li><a href="/tags/数据库/">数据库</a><small>1</small></li>
  
    <li><a href="/tags/网络爬虫/">网络爬虫</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 Jackie wu
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>